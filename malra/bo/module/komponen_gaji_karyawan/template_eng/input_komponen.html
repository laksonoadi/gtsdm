<!-- patTemplate:tmpl name="content" -->
<script>

calc = "hide";
var mathOpr = new Array("0","1","2","3","4","5","6","7","8","9","*","+","/","-","(",")");
var formula = "{FORMULA_BUTTON}";

function createCalcBody(elmn){
   elmn.theElement = 'div';
   elmn.setElementOn = 'calc';
   elmn.attribute = new Array('id|calculator','nama|calculator');
   elmn.style="background-color: #F5FDF1;height: 185px; width: 520px;";
   elmn.createElement();
}

function createCalcToolbar(elmn){
   elmn.theElement = 'div';
   elmn.setElementOn = 'calculator';
   elmn.attribute = new Array('id|toolbar','nama|toolbar');
   elmn.style="height: 20px; width: 510px; padding: 5px 5px 5px 5px; background-color: #CEEEBE;";
   elmn.createElement();
}

function createOprNormalToolbar(elmn){
   elmn.theElement = 'div';
   elmn.setElementOn = 'calculator';
   elmn.attribute = new Array('id|oprToolbar','nama|oprToolbar');
   elmn.style="background-color: #F5FDF1; text-align: center; margin-top: 20px; height: 36px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #339900;";
   elmn.createElement();
}

function createOprFormulaToolbar(elmn){
   elmn.theElement = 'div';
   elmn.setElementOn = 'calculator';
   elmn.attribute = new Array('id|formulaToolbar','nama|formulaToolbar');
   elmn.style="background-color: #F5FDF1; text-align: center; margin-top: 10px; height: 36px; border-bottom-width: 1px; border-bottom-style: solid; border-bottom-color: #339900;";
   elmn.createElement();
}

function createOprNormalButton(elmn,pValue){
   elmn.theElement = 'input';
   elmn.setElementOn = 'oprToolbar';
   elmn.attribute = new Array('id|normalOpr','name|normalOpr','type|button','value|'+pValue);
   elmn.style="height: 25px; width: 25px; margin-left: 1px; border: 1px solid #339900; color: #339900;font-weight: bold;";
   elmn.functionSet = 'document.getElementById("formula").value +="'+pValue+'"';

   elmn.createElement();
}

function createOprFormulaButton(elmn,pValue){
   elmn.theElement = 'input';
   elmn.setElementOn = 'formulaToolbar';
   elmn.attribute = new Array('id|formulaOpr','name|formulaOpr','type|button','value|'+pValue);
   elmn.style="height: 25px;width: 40px;margin-left: 1px; border: 1px solid #CC6600; color: #CC6600; font-weight: normal;font-size: 10px;";
   elmn.functionSet = 'document.getElementById("formula").value +="'+pValue+'"';
   elmn.createElement();
}

function createClearToolbar(elmn){
   elmn.theElement = 'div';
   elmn.setElementOn = 'calculator';
   elmn.attribute = new Array('id|clearToolbar','nama|clearToolbar');
   elmn.style="background-color: #F5FDF1;text-align: center; height: 30px; margin: 10px auto 0px auto 0px; padding: 10px 0px 0px 0px;";
   elmn.functionSet ="";
   elmn.createElement();
}

function createClearFormulaButton(elmn){
   elmn.theElement = 'input';
   elmn.setElementOn = 'clearToolbar';
   elmn.attribute = new Array('id|formulaOpr','name|formulaOpr','type|button','value|clear');
   elmn.style="background: url(images/button_bg.jpg); height: 30px; width: 60px; border: 1px solid #339900; font-size: 10px; font-family: Verdana, Arial, Helvetica, sans-serif; color: #339900; font-weight: bold;";
   elmn.functionSet = 'document.getElementById("formula").value =""';
   elmn.createElement();
}

function creteCloseButton(elmn){
   elmn.theElement = 'input';
   elmn.setElementOn = 'toolbar';
   elmn.attribute = new Array('id|closeButton','name|closeButton','type|button','value|X');

   elmn.style="background: url(images/button_bg.jpg); height: 20px;width: 60px;border: 1px solid #990000; font-size: 10px; font-family: Verdana, Arial, Helvetica, sans-serif; color: #990000; font-weight: bold;";
   
   elmn.functionSet = 'delElement("calc","calculator")';
   elmn.createElement();
}

function createMathButton(elmn){
   for(var i=0;i<mathOpr.length;i++){
      createOprNormalButton(elmn,mathOpr[i]);
   }
}

function createFormulaButton(elmn){
   var arrFormula = formula.split('|');
   for(var j=0;j<arrFormula.length;j++){
      createOprFormulaButton(elmn,arrFormula[j]);
   }
}


function show(){
      var elmn = new jElement();
      if(!document.getElementById('calculator')){
         createCalcBody(elmn);
         createCalcToolbar(elmn);
         createOprNormalToolbar(elmn);
         createOprFormulaToolbar(elmn);
         creteCloseButton(elmn);
         createMathButton(elmn);
         createFormulaButton(elmn);
         createClearToolbar(elmn);
         createClearFormulaButton(elmn);
         $("#toolbar").mousedown(function(){$("#calc").draggable({opacity: 0.50});});
         $("#toolbar").mouseup(function(){$("#calc").draggable( 'disable' );})
      }
}

</script>
<br />
<!-- patTemplate:tmpl name="warning_box" visibility="hidden" -->
   <div class="notebox-alert">
      {ISI_PESAN}
   </div>
   <br />
   <!-- /patTemplate:tmpl -->
<h1>COMPONENT FORMULA OF SALARY</h1>
<br />
   
   <div class="toolbar">
      <input  type="button"  name="formEditor" value=" Show Formula Editor " class="inputButton" onClick="show();" style="float:right" />
   </div>
   
   <form method="POST" action="{URL_ACTION}" class="xhr_form std_form" id="frmInput" >
   <input type="hidden" name="dataId" value="{DATAID}"  />
   <input type="hidden" name="page" value="{PAGE}"  />
      <table class="table-edit" width="100%">
         <tr class="subhead">
            <th colspan="2">{JUDUL} Formula Component</th>
         </tr>
         <tr>
            <th width="150">Component Name</th>
            <td><input type="text" name="komponen_nama" value="{KOMPONEN_NAMA}" size="40" notab="2" />&nbsp;*</td>
         </tr>
         <tr>
            <th width="150">Formula</th>
            <td><textarea id="formula" name="formula" cols="70" rows="4" >{FORMULA}</textarea>*</td>
         </tr>
         <tr class="buttons">
            <th>&nbsp;
            </th>
            <td>
               <input type="submit" name="btnsimpan" value=" {JUDUL} " class="buttonSubmit"/>
               <input  type="submit"  name="btnbalik" value=" Cancel " class="buttonSubmit"/>
            </td>
         </tr>
      </table>
      <div id="calc" style="margin:20px; margin-bottom:50px; position:absolute; z-index:999999">
   &nbsp;
   </div>
   </form>
   
   <div class="petunjuk-area" id="petunjuk">
      <h4>Information :</h4>
      <ul>
         <li>The sign * indicates that this field must be filled.</li>
         <li>Formula for basic salary and other income are available automatically.</li>
      </ul>
      <div>
         <h4>Components available for formula :</h4>
         <ul>
            <!-- patTemplate:tmpl name="formula-list" -->
            <li>{FORMULA_KOMPONENGAJI}</li>
            <!-- /patTemplate:tmpl -->
         </ul>
      <div>
   </div>
<!-- /patTemplate:tmpl -->

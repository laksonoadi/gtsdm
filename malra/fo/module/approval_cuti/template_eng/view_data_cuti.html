
<!-- patTemplate:tmpl name="content" -->
<script language="javascript" type="text/javascript">

function konfirmasi() {
		if(document.getElementById('btnbatal').value == " Reset "){
      document.getElementById('btnbatal').type = "reset";
      document.frmInput.onReset();
    }else{
      document.getElementById('btnbatal').type = "submit";
      document.frmInput.onSubmit();
    }
}

function ubahTotalAmbil(field){
    if (field.checked==true){
        document.getElementById('total_ambil').value++;
    } else {
        document.getElementById('total_ambil').value--;
    }
}

function cekJumlahCuti(){
    
    var tipe=document.getElementById('tipe').value;
    var indexStatus=document.getElementById('status').selectedIndex;
    var status=document.getElementById('status').options[indexStatus].text;
    
    if (status!='approved') {cek=true; } else {
      if (tipe!=2) { cek=totalAmbilCuti(); } else 
      if (tipe==2) { cek=totalAmbilCutiKompensasi(); }
    }
    
    
    if (cek==true){
        document.frmInput.btnsimpan.click();
    }
    
    return false;
}

/*function totalAmbilCuti() {
       var sum = 0;
       var temp;
    	 if (document.getElementById('total_ambil').value>document.getElementById('sisa_cuti').value) {
    	      alert('Pengambilan Cuti Annual Pegawai Ini Melebihi Sisa Cuti Annual Anda');
    	      return false;
       }
       return true;
}*/
  
function totalAmbilCutiKompensasi() {
       var sum = 0;
       var temp;
       tbd = document.getElementById('table-tanggal');
       tes=document.getElementById('total_ambil').value;
       
    	 if (document.getElementById('total_ambil').value>document.getElementById('sisa_cuti_kompensasi').value) {
    	      alert('Pengambilan Cuti Kompensasi Pegawai Ini Melebihi Sisa Cuti Kompensasi');
    	      return false;
       }
       return true;
  }
</script>
<!-- patTemplate:tmpl name="warning_box" visibility="hidden" -->
<div class="{CLASS_PESAN}">
   {ISI_PESAN}
</div>
<br />
<!-- /patTemplate:tmpl -->
<div class="mainContent-fp-element-full">
	<div class="mainContent-fp-element-full-head"><h2>{TITLE}</h2></div>
	<div class="mainContent-fp-element-full-body">
<form method="POST" name="frmInput" action="{URL_AKSI}" class="xhr_form std_form" id="frmInput" enctype="multipart/form-data">
   <input type="hidden" name="idPeg" value="{ID}">
   <input type="hidden" name="op" value="{OP}" id="op">
   <input type="hidden" name="year" value="{YEAR}" id="year">
   <input type="hidden" name="pilihpegawai" value="{PILIHPEGAWAI}" id="pilihpegawai">
   <table class="table-details" width="100%" >
      <tr class="subhead">
        <th colspan="2" valign="center">Employee Data</th>
      </tr>
      <tr>
        <th width="39%">Name</th>
        <td>
          {DATA_NAMA}
        </td>
      </tr>
      <tr>
        <th width="39%">ID</th>
        <td>
          {DATA_NIP}
        </td>
      </tr>
      <tr>
        <th width="39%">Remaining Leave</th>
        <td>
          {DATA_SISA}
          <input type="hidden" name="total_ambil" id="total_ambil" value="{DATA_TOTAL_AMBIL}">
          <input type="hidden" name="sisa_cuti" id="sisa_cuti" value="{DATA_SISA_CUTI}">
          <input type="hidden" name="sisa_cuti_kompensasi" id="sisa_cuti_kompensasi" value="{DATA_SISA_CUTI_KOMPENSASI}">
        </td>
      </tr>
      <tr class="subhead">
        <th colspan="2" valign="center">{LABEL_ACTION} Leave Request Data</th>
      </tr>
      <tr style="display:none">
        <th width="39%">Leave Number</th>
        <td>
          <input type="text" name="no_cuti" size="23" maxlength="20" value="{NO_CUTI}" readonly="readonly" />
        </td>
      </tr>
      <tr><th valign="top">Date Leave</th><td>
      <table width="70%" id="table-tanggal">
      <!-- patTemplate:tmpl name="count_days" type="condition" conditionvar="DAYS_EMPTY" -->
      <!-- patTemplate:sub condition="YES" -->
      <!-- /patTemplate:sub -->
      <!-- patTemplate:sub condition="NO" -->
            <!-- patTemplate:tmpl name="data_count_days" -->
            <tr>
              <td>
                <input type="checkbox" name="data[pilih][]" {CHECKED} onChange="ubahTotalAmbil(this);" />{TANGGAL_LABEL}
                <input type="hidden" name="data[id][]" value="{TANGGAL_ID}" />
                <input type="hidden" name="data[tanggal][]" value="{TANGGAL}" />
              </td>
            </tr>
            <!-- /patTemplate:tmpl -->
         <!-- /patTemplate:sub -->
      <!-- /patTemplate:tmpl -->
      </table>
      </td></tr>
      <tr style="display:none">
        <th>Leave Begin</th>
        <td>
          <!-- patTemplate:gtfwrendermodule module="tanggal" submodule="tanggal" action="view" name="tgl_mulai"  / -->
        </td>
      </tr>
      <tr style="display:none">
        <th>Leaved End</th>
        <td>
          <!-- patTemplate:gtfwrendermodule module="tanggal" submodule="tanggal" action="view" name="tgl_selesai"  / -->
          <!-- patTemplate:gtfwrendermodule module="combobox" submodule="combobox" action="view" name="tipe1"  / -->
        </td>
      </tr>
      <tr>
        <th>Leave Type</th>
        <td>{DATA_TIPE_LABEL}
          <input type="hidden" name="tipe" id="tipe" value="{DATA_TIPE}">
        </td>
      </tr>
      <tr>
        <th>Leave Reason</th>
        <td> 
          <!--<textarea name="alasan" cols="65" rows="5" disabled= >{DATA_ALASAN}</textarea>*-->
          <input type="hidden" name="alasan" value="{DATA_ALASAN}">
          {DATA_ALASAN}
        </td>
      </tr>
      <tr>
        <th>Work Responsibility</th>
        <td>
          <textarea name="tggjwbker" cols="65" rows="5">{DATA_TGGJWBKER}</textarea>
        </td>
      </tr>
      <tr style="display:none">
        <th>Email {LABEL_ACTION}</th>
        <td>
          <textarea name="email_isi" cols="65" rows="5">{DATA_ISIEMAIL}</textarea>
          <input type="hidden" name="email_to" value="{DATA_EMAIL}">
          <input type="hidden" name="email_cc" value="{DATA_EMAILHRD}">
        </td>
      </tr>
      <tr>
        <th>Send To</th>
        <td>
          {DATA_EMAIL}
        </td>
      </tr>
      <tr style="display:none">
        <th>Cc</th>
        <td>
          {DATA_EMAILHRD}
        </td>
      </tr>
      <tr style="display:none">
        <th>Temporary Charge</th>
        <td>
          <input type="text" name="pggjwbsmnt" size="23" maxlength="20" value="{DATA_PGGJWBSMNT}"/>
        </td>
      </tr>
      <tr style="display:none">
        <th>Temporary Charge Contact</th>
        <td>
          <input type="text" name="pggjwbsmntk" size="23" maxlength="20" value="{DATA_PGGJWBSMNTK}"/>
        </td>
      </tr>
      <tr>
        <th>Deduction Status</th>
        <td>
          <!-- patTemplate:gtfwrendermodule module="combobox" submodule="combobox" action="view" name="reduced"  / --> *
        </td>
      </tr>
	  <tr>
        <th>Approval Status</th>
        <td>
          <!-- patTemplate:gtfwrendermodule module="combobox" submodule="combobox" action="view" name="status"  / --> *
        </td>
      </tr>
	  <tr>
        <th>Approval Date</th>
        <td>
          <!-- patTemplate:gtfwrendermodule module="tanggal" submodule="tanggal" action="view" name="tgl_stat"  / -->
        </td>
      </tr>
      <tr class="buttons">
         <th>&nbsp;</th>
         <td>
            <input type="hidden" name="id" value="{DATA_ID}" />
			      <input type="hidden" name="peg_id" value="{DATA_PEG_ID}" />
			      <div style="display:none"><input name="btnsimpan" value=" {LABEL_ACTION} " class="buttonSubmit" type="submit"></div>
				  <input name="btnsimpan" value=" {LABEL_ACTION} " class="buttonSubmit" type="submit">
			      <!--<input name="btnsimpanBohong" value=" {LABEL_ACTION} " class="buttonSubmit" type="button" onClick="cekJumlahCuti();">-->
            <input name="btnbatal" id="btnbatal" value="{BUTTON}" class="buttonSubmit" type="button" onclick="konfirmasi()">
         </td>
      </tr>
   </table>
</form>
   <table class="table-form" width="100%">
      <tr>
         <td class="table-common-links">
            <a href="{URL_BACK}"><img src="images/button-edit.gif" alt="" />View List</a>
         </td>
      </tr>
   </table>
</div></div>
<!-- /patTemplate:tmpl -->